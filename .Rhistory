fig_table = "Figure_2",
species = df_final$species,
site = df_final$site,
size_original = df_final$size_original,
size_rep = df_final$size_rep,
size_units = "mm",
size_error = df_final$size_error,
size_error_type = "CI",
time_rep = df_final$time_rep,
time_error = NA)
df_final <- df3 %>%
filter(!is.na(length_mean)) %>%
arrange(species, year, site) %>%
mutate(size_original = "mean",
sample_size = NA,
sample_size_units = NA,
lat = 33.555,
long = -117.816,
era = ifelse(year < 2000, "past", "present"))
names(df_final)
dfMeta <- data.frame(
study = "Roy2003",
studySub = NA,
fig_table = "Figure_2",
species = df_final$species,
site = df_final$site,
size_rep = df_final$size_rep,
size_units = "mm",
size_error = df_final$size_error,
size_error_type = "CI",
time_rep = df_final$time_rep,
time_error = NA,
year = df_final$year,
year_error = NA,
year_error_type = NA,
sample_size = NA,
sample_size_units = NA
)
names(df_final)
dfMeta <- data.frame(
study = "Roy_2003",
studySub = NA,
fig_table = "Figure_2",
species = df_final$species,
site = df_final$site,
size_original = df_final$size_original,
size_rep = df_final$size_rep,
size_units = "mm",
size_error = df_final$size_error,
size_error_type = "CI",
time_rep = df_final$time_rep,
time_error = NA,
era = df_final$era,
year = df_final$year,
year_error = NA,
year_error_type = NA,
sample_size = df_final$sample_size,
sample_size_units = df_final$sample_size_units,
museum = TRUE,
size_threshold_mm = 0,
latitude = df_final$lat,
longitude = df_final$long
)
unique(dfMeta$species)
write.csv(dfMeta, "sbs_meta/output/dfMeta_Roy2003.csv")
elahi <- read_csv("sbs_meta/output/dfMeta_Elahi2015.csv")
fisher <- read_csv("sbs_meta/output/dfMeta_Fisher2009.csv")
gall_frank <- read_csv("sbs_meta/output/dfMeta_Galloway-Frank_2017.csv")
gall_tren <- read_csv("sbs_meta/output/dfMeta_Galloway-Treneman_2017.csv")
hay_king <- read_csv("sbs_meta/output/dfMeta_Hayford-King_2017.csv")
dat <- rbind(elahi, fisher, gall_frank, gall_tren, hay_king)
dat
roy <- read_csv("sbs_meta/output/dfMeta_Roy2003.csv")
dat <- rbind(elahi, fisher, gall_frank, gall_tren, hay_king, roy)
dat %>%
ggplot(aes(year, size_rep, color = species, shape = study)) +
geom_point()
dat <- rbind(elahi, fisher, gall_frank, gall_tren, hay_king, roy) %>%
mutate(group = paste(study, species, sep = "-"))
## Remove CNM
dat <- dat %>%
filter(site != "CNM")
dat %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point() +
geom_line()
dat %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point() +
geom_line(aes(group = group))
View(dat)
dat <- rbind(elahi, fisher, gall_frank, gall_tren, hay_king, roy) %>%
mutate(group = paste(study, species, site, sep = "-"))
## Remove CNM
dat <- dat %>%
filter(site != "CNM")
dat %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point() +
geom_line(aes(group = group))
## Remove Lottia gigantea
dat <- dat %>% filter(species != "Lottia gigantea")
dat %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point() +
geom_line(aes(group = group))
dat
dat %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point() +
geom_line(aes(group = group)) +
geom_errorbar(aes(ymax = size_rep + size_error, ymin = size_rep - size_error))
dat %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point() +
geom_line(aes(group = group)) +
geom_errorbar(aes(ymax = size_rep + size_error, ymin = size_rep - size_error)) +
labs(x = "Year",
y = "Size (mm)")
theme_set(theme_bw(base_size = 12) +
theme(panel.grid = element_blank()))
library(viridis)
dat %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point() +
geom_line(aes(group = group)) +
geom_errorbar(aes(ymax = size_rep + size_error, ymin = size_rep - size_error)) +
labs(x = "Year",
y = "Size (mm)") +
scale_color_viridis_d()
dat %>%
ggplot(aes(year, size_rep, fill = species, shape = study, group = group)) +
geom_point() +
geom_line(aes(group = group)) +
geom_errorbar(aes(ymax = size_rep + size_error, ymin = size_rep - size_error)) +
labs(x = "Year",
y = "Size (mm)") +
scale_color_viridis_d() +
scale_shape_manual(seq(21, 25, by = 1))
dat %>%
ggplot(aes(year, size_rep, fill = species, shape = study, group = group)) +
geom_point() +
geom_line(aes(group = group)) +
geom_errorbar(aes(ymax = size_rep + size_error, ymin = size_rep - size_error)) +
labs(x = "Year",
y = "Size (mm)") +
scale_color_viridis_d() +
scale_shape_manual(values = seq(21, 25, by = 1))
dat %>%
ggplot(aes(year, size_rep, fill = species, shape = study, group = group)) +
geom_point() +
geom_line(aes(group = group)) +
geom_errorbar(aes(ymax = size_rep + size_error, ymin = size_rep - size_error)) +
labs(x = "Year",
y = "Size (mm)") +
scale_color_viridis_d()
dat %>%
ggplot(aes(year, size_rep, fill = species, shape = study, group = group)) +
geom_point() +
geom_line(aes(group = group)) +
geom_errorbar(aes(ymax = size_rep + size_error, ymin = size_rep - size_error)) +
labs(x = "Year",
y = "Size (mm)") +
scale_fill_viridis_d()
dat %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point(size = 4) +
geom_line(aes(group = group)) +
geom_errorbar(aes(ymax = size_rep + size_error, ymin = size_rep - size_error)) +
labs(x = "Year",
y = "Size (mm)") +
scale_color_viridis_d()
dat %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point(size = 2) +
geom_line(aes(group = group)) +
geom_errorbar(aes(ymax = size_rep + size_error, ymin = size_rep - size_error)) +
labs(x = "Year",
y = "Size (mm)") +
scale_color_viridis_d()
ggsave("meta_figs/plot_meta_size_year.pdf", height = 3.5, width = 5)
dat %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point(size = 2, alpha = 0.75) +
geom_line(aes(group = group), alpha = 0.5) +
geom_errorbar(aes(ymax = size_rep + size_error, ymin = size_rep - size_error)) +
labs(x = "Year",
y = "Size (mm)") +
scale_color_viridis_d()
ggsave("meta_figs/plot_meta_size_year.pdf", height = 3.5, width = 5)
ggsave()
ggsave("sbs_meta/meta_figs/plot_meta_size_year.pdf", height = 3.5, width = 5)
ggsave("sbs_meta/meta_figs/plot_meta_size_year.pdf", height = 5, width = 5)
ggsave("sbs_meta/meta_figs/plot_meta_size_year.pdf", height = 5, width = 7)
dat <- rbind(elahi, fisher, gall_frank, gall_tren, hay_king, roy) %>%
mutate(group = paste(study, species, site, sep = "-"),
size_log = log(size_rep),
size_error_log = log(size_error))
## Plot logged data
dat %>%
ggplot(aes(year, size_log, color = species, shape = study, group = group)) +
geom_point(size = 2, alpha = 0.75) +
geom_line(aes(group = group), alpha = 0.5) +
geom_errorbar(aes(ymax = size_log + size_error_log, ymin = size_log - size_error_log)) +
labs(x = "Year",
y = "Size (mm)") +
scale_color_viridis_d()
ggsave("sbs_meta/meta_figs/plot_meta_size_year.pdf", height = 7, width = 7)
## Plot untransformed data
dat %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point(size = 2, alpha = 0.75) +
geom_line(aes(group = group), alpha = 0.5) +
geom_errorbar(aes(ymax = size_rep + size_error, ymin = size_rep - size_error)) +
labs(x = "Year",
y = "Size (mm)") +
scale_color_viridis_d()
ggsave("sbs_meta/meta_figs/plot_meta_size_year.pdf", height = 7, width = 7)
dat <- rbind(elahi, fisher, gall_frank, gall_tren, hay_king, roy) %>%
mutate(group = paste(study, species, site, sep = "-"))
## Remove Lottia gigantea
dat <- dat %>% filter(species != "Lottia gigantea")
## Plot untransformed data
dat %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point(size = 2, alpha = 0.75) +
geom_line(aes(group = group), alpha = 0.5) +
geom_errorbar(aes(ymax = size_rep + size_error, ymin = size_rep - size_error)) +
labs(x = "Year",
y = "Size (mm)") +
scale_color_viridis_d()
ggsave("sbs_meta/meta_figs/plot_meta_size_year.pdf", height = 7, width = 7)
## Remove Lottia gigantea
dat <- dat %>%
filter(site != "CNM") %>%
filter(species != "Lottia gigantea")
## Plot untransformed data
dat %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point(size = 2, alpha = 0.75) +
geom_line(aes(group = group), alpha = 0.5) +
geom_errorbar(aes(ymax = size_rep + size_error, ymin = size_rep - size_error)) +
labs(x = "Year",
y = "Size (mm)") +
scale_color_viridis_d()
ggsave("sbs_meta/meta_figs/plot_meta_size_year.pdf", height = 7, width = 7)
## Plot untransformed data
dat %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point(size = 2, alpha = 0.75) +
geom_line(aes(group = group), alpha = 0.5) +
#geom_errorbar(aes(ymax = size_rep + size_error, ymin = size_rep - size_error)) +
labs(x = "Year",
y = "Size (mm)") +
scale_color_viridis_d()
ggsave("sbs_meta/meta_figs/plot_meta_size_year.pdf", height = 7, width = 7)
ggsave("sbs_meta/meta_figs/plot_meta_size_year.pdf", height = 5, width = 7)
ggsave("sbs_meta/meta_figs/plot_meta_size_year.pdf", height = 6, width = 7)
## Plot untransformed data
dat %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point(size = 2, alpha = 0.75) +
geom_line(aes(group = group), alpha = 0.5) +
#geom_errorbar(aes(ymax = size_rep + size_error, ymin = size_rep - size_error)) +
labs(x = "Year",
y = "Mean size (mm)") +
scale_color_viridis_d()
ggsave("sbs_meta/meta_figs/plot_meta_size_year.pdf", height = 6, width = 7)
## Plot untransformed data
dat %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point(size = 2, alpha = 0.75) +
geom_line(aes(group = group), alpha = 0.5) +
#geom_errorbar(aes(ymax = size_rep + size_error, ymin = size_rep - size_error)) +
labs(x = "Year",
y = "Mean size (mm)") +
scale_color_viridis_d() +
facet_wrap(~ museum)
## Remove CNM, then rename Site
dat <- dat %>%
filter(site != "CNM") %>%
mutate(site = ifelse(study == "Roy_2003", site = "SoCal"))
## Remove CNM, then rename Site
dat <- dat %>%
filter(site != "CNM") %>%
mutate(site = ifelse(study == "Roy_2003", "SoCal", site))
## Plot untransformed data
dat %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point(size = 2, alpha = 0.75) +
geom_line(aes(group = group), alpha = 0.5) +
#geom_errorbar(aes(ymax = size_rep + size_error, ymin = size_rep - size_error)) +
labs(x = "Year",
y = "Mean size (mm)") +
scale_color_viridis_d() +
facet_wrap(~ museum)
dat <- rbind(elahi, fisher, gall_frank, gall_tren, hay_king, roy)
## Remove CNM, then rename Site
dat <- dat %>%
filter(site != "CNM") %>%
mutate(site = ifelse(study == "Roy_2003", "SoCal", site)) %>%
mutate(group = paste(study, species, site, sep = "-"))
## Plot untransformed data
dat %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point(size = 2, alpha = 0.75) +
geom_line(aes(group = group), alpha = 0.5) +
#geom_errorbar(aes(ymax = size_rep + size_error, ymin = size_rep - size_error)) +
labs(x = "Year",
y = "Mean size (mm)") +
scale_color_viridis_d() +
facet_wrap(~ museum)
## Remove CNM, then rename Site
dat <- dat %>%
filter(site != "CNM") %>%
mutate(site = ifelse(study == "Roy_2003", "SoCal", site)) %>%
mutate(group = paste(study, species, site, sep = "-"),
museum = ifelse(museum = TRUE, "museum", "field"))
## Remove CNM, then rename Site
dat <- dat %>%
filter(site != "CNM") %>%
mutate(site = ifelse(study == "Roy_2003", "SoCal", site)) %>%
mutate(group = paste(study, species, site, sep = "-"),
museum = ifelse(museum == TRUE, "museum", "field"))
## Plot untransformed data
dat %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point(size = 2, alpha = 0.75) +
geom_line(aes(group = group), alpha = 0.5) +
#geom_errorbar(aes(ymax = size_rep + size_error, ymin = size_rep - size_error)) +
labs(x = "Year",
y = "Mean size (mm)") +
scale_color_viridis_d() +
facet_wrap(~ museum)
## Plot untransformed data
dat %>%
filter(species != "Lottia gigantea") %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point(size = 2, alpha = 0.75) +
geom_line(aes(group = group), alpha = 0.5) +
#geom_errorbar(aes(ymax = size_rep + size_error, ymin = size_rep - size_error)) +
labs(x = "Year",
y = "Mean size (mm)") +
scale_color_viridis_d() +
facet_wrap(~ museum)
ggsave("sbs_meta/meta_figs/plot_meta_size_year.pdf", height = 6, width = 7)
## Plot untransformed data
dat %>%
filter(species != "Lottia gigantea") %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point(size = 2, alpha = 0.75) +
geom_line(aes(group = group), alpha = 0.5) +
#geom_errorbar(aes(ymax = size_rep + size_error, ymin = size_rep - size_error)) +
labs(x = "Year",
y = "Mean size (mm)") +
scale_color_viridis_d() +
facet_wrap(~ museum) +
theme(legend.position = "bottom")
ggsave("sbs_meta/meta_figs/plot_meta_size_year.pdf", height = 6, width = 7)
theme_set(theme_bw(base_size = 12) +
theme(panel.grid = element_blank(),
strip.background = element_blank()))
## Plot untransformed data
dat %>%
filter(species != "Lottia gigantea") %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point(size = 2, alpha = 0.75) +
geom_line(aes(group = group), alpha = 0.5) +
#geom_errorbar(aes(ymax = size_rep + size_error, ymin = size_rep - size_error)) +
labs(x = "Year",
y = "Mean size (mm)") +
scale_color_viridis_d() +
facet_wrap(~ museum) +
theme(legend.position = "bottom")
ggsave("sbs_meta/meta_figs/plot_meta_size_year.pdf", height = 6, width = 9)
## Plot untransformed data
dat %>%
filter(species != "Lottia gigantea") %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point(size = 2, alpha = 0.75) +
geom_line(aes(group = group), alpha = 0.5) +
#geom_errorbar(aes(ymax = size_rep + size_error, ymin = size_rep - size_error)) +
labs(x = "Year",
y = "Mean size (mm)") +
scale_color_viridis_d() +
facet_wrap(~ museum) +
theme(legend.position = "right")
ggsave("sbs_meta/meta_figs/plot_meta_size_year.pdf", height = 6, width = 9)
## Plot untransformed data
dat %>%
#filter(species != "Lottia gigantea") %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point(size = 2, alpha = 0.75) +
geom_line(aes(group = group), alpha = 0.5) +
#geom_errorbar(aes(ymax = size_rep + size_error, ymin = size_rep - size_error)) +
labs(x = "Year",
y = "Mean size (mm)") +
scale_color_viridis_d() +
facet_wrap(~ museum) +
theme(legend.position = "right")
ggsave("sbs_meta/meta_figs/plot_meta_size_year.pdf", height = 6, width = 9)
## Change SD to CI
dat <- dat %>%
mutate(size_CI = ifelse(study == "Roy_2003", size_error,
2 * (size_error / sqrt(sample_size))))
View(dat)
## Change SD to CI
dat <- dat %>%
mutate(size_CI = ifelse(study == "Roy_2003", size_error, 2 * (size_error / sqrt(sample_size))))
## Change SD to CI
str(dat)
## Remove CNM, then rename Site
dat <- dat %>%
filter(site != "CNM") %>%
mutate(site = ifelse(study == "Roy_2003", "SoCal", site)) %>%
mutate(group = paste(study, species, site, sep = "-"),
museum = ifelse(museum == TRUE, "museum", "field"),
sample_size = as.numeric(sample_size))
## Change SD to CI
str(dat)
dat <- dat %>%
mutate(size_CI = ifelse(study == "Roy_2003", size_error, 2 * (size_error / sqrt(sample_size))))
## Plot untransformed data
dat %>%
#filter(species != "Lottia gigantea") %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point(size = 2, alpha = 0.75) +
geom_line(aes(group = group), alpha = 0.5) +
geom_errorbar(aes(ymax = size_rep + size_CI, ymin = size_rep - size_CI)) +
labs(x = "Year",
y = "Mean size (mm)") +
scale_color_viridis_d() +
facet_wrap(~ museum) +
theme(legend.position = "right")
ggsave("sbs_meta/meta_figs/plot_meta_size_year.pdf", height = 6, width = 9)
dat <- rbind(elahi, fisher, gall_frank, gall_tren, hay_king, roy)
## Remove CNM, then rename Site
dat <- dat %>%
filter(site != "CNM") %>%
mutate(site = ifelse(study == "Roy_2003", "SoCal", site)) %>%
mutate(group = paste(study, species, site, sep = "-"),
museum = ifelse(museum == TRUE, "museum", "field"),
sample_size = as.numeric(sample_size))
## Change SD to CI
str(dat)
dat <- dat %>%
mutate(size_CI = ifelse(study == "Roy_2003", size_error, 2 * (size_error / sqrt(sample_size))))
## Plot untransformed data
dat %>%
#filter(species != "Lottia gigantea") %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point(size = 2, alpha = 0.75) +
geom_line(aes(group = group), alpha = 0.5) +
geom_errorbar(aes(ymax = size_rep + size_CI, ymin = size_rep - size_CI)) +
labs(x = "Year",
y = "Mean size (mm)") +
scale_color_viridis_d() +
facet_wrap(~ museum) +
theme(legend.position = "right")
ggsave("sbs_meta/meta_figs/plot_meta_size_year.pdf", height = 6, width = 9)
## Plot untransformed data
dat %>%
#filter(species != "Lottia gigantea") %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point(size = 3, alpha = 0.75) +
geom_line(aes(group = group), size = 2, alpha = 0.5) +
geom_errorbar(aes(ymax = size_rep + size_CI, ymin = size_rep - size_CI), size = 1, width = 5) +
labs(x = "Year",
y = "Mean size (mm)") +
scale_color_viridis_d() +
facet_wrap(~ museum) +
theme(legend.position = "right")
ggsave("sbs_meta/meta_figs/plot_meta_size_year.pdf", height = 6, width = 9)
## Plot untransformed data
dat %>%
#filter(species != "Lottia gigantea") %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point(size = 3, alpha = 0.75) +
geom_line(aes(group = group), size = 1, alpha = 0.75) +
geom_errorbar(aes(ymax = size_rep + size_CI, ymin = size_rep - size_CI), size = 1, width = 5) +
labs(x = "Year",
y = "Mean size (mm)") +
scale_color_viridis_d() +
facet_wrap(~ museum) +
theme(legend.position = "right")
ggsave("sbs_meta/meta_figs/plot_meta_size_year.pdf", height = 6, width = 9)
## Plot untransformed data
dat %>%
#filter(species != "Lottia gigantea") %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point(size = 3, alpha = 0.75) +
geom_line(aes(group = group), size = 1, alpha = 0.75) +
#geom_errorbar(aes(ymax = size_rep + size_CI, ymin = size_rep - size_CI), size = 1, width = 5) +
labs(x = "Year",
y = "Mean size (mm)") +
scale_color_viridis_d() +
facet_wrap(~ museum) +
theme(legend.position = "right")
ggsave("sbs_meta/meta_figs/plot_meta_size_year.pdf", height = 6, width = 9)
## Plot untransformed data
dat %>%
#filter(species != "Lottia gigantea") %>%
ggplot(aes(year, size_rep, color = species, shape = study, group = group)) +
geom_point(size = 3, alpha = 0.75) +
geom_line(aes(group = group), size = 0.5, alpha = 0.75) +
#geom_errorbar(aes(ymax = size_rep + size_CI, ymin = size_rep - size_CI), size = 1, width = 5) +
labs(x = "Year",
y = "Mean size (mm)") +
scale_color_viridis_d() +
facet_wrap(~ museum) +
theme(legend.position = "right")
ggsave("sbs_meta/meta_figs/plot_meta_size_year.pdf", height = 6, width = 9)
